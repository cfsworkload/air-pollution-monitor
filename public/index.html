<!DOCTYPE html>
<html lang="en">
<head>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Air Pollution FIWARE Monitor @ Bluemix</title>

<link
	href="http://fonts.googleapis.com/css?family=Roboto+Slab:400,700,300,100"
	rel="stylesheet" type="text/css">
<link
	href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css"
	rel="stylesheet">
<link href="http://getbootstrap.com/dist/css/bootstrap.min.css"
	rel="stylesheet">

<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>

<link rel="icon" type="image/png" href="images/fimix4.png">

<link href="css/simplegrid.css" rel="stylesheet" media="screen">
<link href="css/style.css" rel="stylesheet" media="screen">

<script>
	function onLogin() {
		$("#loading_image").css("display", "block");
		$.post("/login", {
			user : $('#user').val(),
			password : $('#password').val()
		}).done(function(data) {
			sessionStorage.fiwareToken = data;
			$.get("/isloaded", function(res) {
				window.location = "/main.html";
			});
		}).fail(function() {
			$('#errorMsg').css('display', 'block');
			$("#loading_image").css("display", "none");
		});
	}
</script>

<style type="text/css"></style>
</head>
<body>
	<div
		style="position: fixed; left: 0px; right: 0px; top: 0px; text-align: center;"
		class="header">
		<a href="http://www.ibm.com/cloud-computing/bluemix/"> <img
			class="pull-left" src="images/blulogo.png"
			style="height: 30px; margin-top: 10px; float: left;" />
		</a> <a href="/main.html"> Air Pollution FIWARE Monitor @ Bluemix> </a> <a
			href="https://www.fiware.org/"> <img class="pull-right"
			src="images/filogo1.png"
			style="height: 25px; margin-top: 13px; float: right;" />
		</a>
	</div>
	<!-- Grid 1 -->
	<div class="title">
		<div class="content" style="text-align: center">

			<!-- Login -->

			<form onSubmit="onLogin(); return false;"
				style="width: 500px; display: inline-block; position: relative;"
				class="panel panel-primary">
				<div class="panel-heading">
					<h3 class="panel-title">FIWARE Lab login</h3>
				</div>


				<div style="width: 100%; position: relative;">

					<div style="display: table; width: 100%;">
						<div style="display: table-row">
							<div style="display: table-cell; vertical-align: middle;">
								<img src="images/filoginlogo.png"
									style="width: 100px; height: 100px; margin: 30px;">
							</div>
							<div style="display: table-cell">
								<div style="float: right; margin: 30px;">
									<input id="user" type="text" name="user" class="form-control"
										value="" placeholder="FIWARE Lab username"> <input
										id="password" type="password" name="password" value=""
										class="form-control" placeholder="FIWARE Lab password"><br>
									<input type="submit" value="Submit"
										class="btn btn-lg btn-primary btn-block">
								</div>
							</div>
						</div>
					</div>

					<img id="loading_image"
						src="http://wbpsites.com/howtobesingle/us/tumblr/img/tumblr/ajax_loader.gif"
						style="position: absolute; display: none; width: 100px; top: 50px; left: 200px;" />

				</div>

				<div id="errorMsg" style="color: red; display: none;">Login
					Error</div>


			</form>


			<!-- Login End -->


		</div>
	</div>

</body>
	<div
		style="position: absolute; left: 0px; right: 0px; bottom: 0px; text-align: center; height: 100px;"
		class="header1">
		<div class="content1" style="text-align: center"></div>
		<div>
			<p style="text-align: center">
				<a
					style="width: 250px; height: 50px; font-size: 15px; font-weight: bold; float: right; margin-right: 20px; margin-bottom: 10px;"
					class="button" href="red/">Go to your Node-RED flow editor</a>
			</p>
		</div>
	</div>
</html>
